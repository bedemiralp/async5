/*

 async5.js <https://github.com/bedemiralp/async5>
 Copyright 2013 Berke Ediz Demiralp
 Licensed under the Apache License, Version 2.0

 JS Signals <http://millermedeiros.github.com/js-signals/>
 Released under the MIT license
 Author: Miller Medeiros
 Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)
 */
(function(g){g.async5={_files:{},_loadAfterDependencies:function(a,b){var f,d,c=this._files[a];for(f=0;f<c.provides.length;f++)d=c.provides[f],1>this._files[d].state&&(this._files[d].state=1);if(c.isRequested&&0===c.state)if(0===c.numberOfPendingDependencies)c.state=1,b&&"function"===typeof b&&c.loaded.addOnce(b),this._loadFile(c.url,c.type,c._triggerLoaded);else{b&&"function"===typeof b&&c.loaded.addOnce(b);for(f=0;f<c.dependsOn.length;f++)d=c.dependsOn[f],this._files[d].isRequested=!0,this._loadAfterDependencies(d)}else 2<=
    c.state&&(b&&"function"===typeof b)&&b()},_file:function(a,b,f,d,c){this.loaded=new g.async5.signals.Signal;this.name=a;this.type=b;this.url=f?f:null;this.state=f?0:-1;this.isRequested=!1;this.numberOfPendingDependencies=0;this._onDependencyLoaded=function(){0<g.async5._files[a].numberOfPendingDependencies&&g.async5._files[a].numberOfPendingDependencies--;g.async5._loadAfterDependencies(a)};this._triggerLoaded=function(){var c,e;g.async5._files[a].state=2;g.async5._files[a].loaded.dispatch(a);for(c=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              0;c<g.async5._files[a].provides.length;c++)e=g.async5._files[a].provides[c],e=g.async5._files[e],2>e.state&&(e._triggerLoaded(),e.state=3,e.providedBy=a,e.loaded.removeAll())};this._bindDependencies=function(c){var a,d;if(c instanceof Array)for(a=0;a<c.length;a++)g.async5._files[c[a]]||(g.async5._files[c[a]]=new g.async5._file(c[a],b)),d=g.async5._files[c[a]],2>d.state&&(this.numberOfPendingDependencies++,d.loaded.addOnce(this._onDependencyLoaded))};d&&d instanceof Array?(this._bindDependencies(d),
    this.dependsOn=d):this.dependsOn=[];this.provides=c&&c instanceof Array?c:[]},define:function(a,b,f,d,c){if(a instanceof Array)for(b=0;b<a.length;b++)this.define(a[b]);else"object"===typeof a&&(a.type&&(b=a.type),a.url&&(f=a.url),a.dependsOn&&(d=a.dependsOn),a.provides&&(c=a.provides),a.name&&(a=a.name)),this._files[a]?this._files[a]&&-1===this._files[a].state&&(this._files[a].url=f,this._files[a].state=0,d?(this._files[a]._bindDependencies(d),this._files[a].dependsOn=d):this._files[a].dependsOn=
    [],this._files[a].provides=c?c:[]):this._files[a]=new this._file(a,b,f,d,c)},load:function(a,b,f,d,c,h){if(a instanceof Array)for(b=0;b<a.length;b++)this.load(a[b]);else"object"===typeof a&&(a.callback&&(b=a.callback),a.type&&(f=a.type),a.url&&(d=a.url),a.dependsOn&&(c=a.dependsOn),a.provides&&(h=a.provides),a.name&&(a=a.name)),!this._files[a]&&(a&&f&&d)&&this.define(a,f,d,c,h),this._files[a]&&(this._files[a].isRequested=!0,this._loadAfterDependencies(a,b))},_loadFile:function(a,b,f,d,c){function h(){window.attachEvent?
    window.detachEvent("onload",h):window.removeEventListener("load",h,!1);if("js"===b)e=document.createElement("script"),e.type="text/javascript",e.src=a,e.async=!0;else if("css"===b)e=document.createElement("link"),e.setAttribute("rel","stylesheet"),e.type="text/css",e.href=a;else return!1;var j=document.head||document.getElementsByTagName("head")[0]||document.documentElement;e.onload=e.onreadystatechange=function(c,a){if(a||!e.readyState||/loaded|complete/.test(e.readyState))e=e.onload=e.onreadystatechange=
    null,a||f&&f()};j.appendChild(e);d&&(g=setTimeout(function(){clearTimeout(g);if(e)e.onload(0,!0);c&&c()},d))}var e,g;/loaded|complete/.test(document.readyState)?h():window.attachEvent?window.attachEvent("onload",h):window.addEventListener("load",h,!1)}}})(this);
(function(g){function a(c,a,e,b,d){this._listener=a;this._isOnce=e;this.context=b;this._signal=c;this._priority=d||0}function b(c,a){if("function"!==typeof c)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",a));}function f(){this._bindings=[];this._prevParams=null;var a=this;this.dispatch=function(){f.prototype.dispatch.apply(a,arguments)}}a.prototype={active:!0,params:null,execute:function(a){var b;this.active&&this._listener&&(a=this.params?this.params.concat(a):
    a,b=this._listener.apply(this.context,a),this._isOnce&&this.detach());return b},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal;delete this._listener;delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+
    ", isBound:"+this.isBound()+", active:"+this.active+"]"}};f.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(c,b,e,d){var f=this._indexOfListener(c,e);if(-1!==f){if(c=this._bindings[f],c.isOnce()!==b)throw Error("You cannot add"+(b?"":"Once")+"() then add"+(!b?"":"Once")+"() the same listener without removing the relationship first.");}else c=new a(this,c,b,e,d),this._addBinding(c);this.memorize&&this._prevParams&&c.execute(this._prevParams);return c},
    _addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var e=this._bindings.length,d;e--;)if(d=this._bindings[e],d._listener===a&&d.context===b)return e;return-1},has:function(a,b){return-1!==this._indexOfListener(a,b)},add:function(a,d,e){b(a,"add");return this._registerListener(a,!1,d,e)},addOnce:function(a,d,e){b(a,"addOnce");return this._registerListener(a,!0,
        d,e)},remove:function(a,d){b(a,"remove");var e=this._indexOfListener(a,d);-1!==e&&(this._bindings[e]._destroy(),this._bindings.splice(e,1));return a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(a){if(this.active){var b=Array.prototype.slice.call(arguments),e=this._bindings.length,d;this.memorize&&(this._prevParams=
        b);if(e){d=this._bindings.slice();this._shouldPropagate=!0;do e--;while(d[e]&&this._shouldPropagate&&!1!==d[e].execute(b))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll();delete this._bindings;delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var d=f;d.Signal=f;"function"===typeof define&&define.amd?define(function(){return d}):"undefined"!==typeof module&&module.exports?module.exports=d:g.signals=
    d})(async5);