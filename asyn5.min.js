/*
 async5.js <https://github.com/bedemiralp/async5>
 Copyright 2013 Berke Ediz Demiralp
 Licensed under the Apache License, Version 2.0

 JS Signals <http://millermedeiros.github.com/js-signals/>
 Released under the MIT license
 Author: Miller Medeiros
 Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)
 */
(function(g){g.async5={_files:{},_loadAfterDependencies:function(a,e){var f,b,c=this._files[a];for(f=0;f<c.provides.length;f++)b=c.provides[f],1>this._files[b].state&&(this._files[b].state=1);if(c.isRequested&&0===c.state)if(0===c.numberOfPendingDependencies)c.state=1,e&&"function"===typeof e&&c.loaded.addOnce(e),this._loadFile(c.url,c.type,c._triggerLoaded);else{e&&"function"===typeof e&&c.loaded.addOnce(e);for(f=0;f<c.dependsOn.length;f++)b=c.dependsOn[f],this._files[b].isRequested=!0,this._loadAfterDependencies(b)}else 2<=
    c.state&&(e&&"function"===typeof e)&&e()},_file:function(a,e,f,b,c){this.loaded=new g.async5.signals.Signal;this.name=a;this.type=e;this.url=f?f:null;this.state=f?0:-1;this.isRequested=!1;this.numberOfPendingDependencies=0;this._onDependencyLoaded=function(){0<g.async5._files[a].numberOfPendingDependencies&&g.async5._files[a].numberOfPendingDependencies--;g.async5._loadAfterDependencies(a)};this._triggerLoaded=function(){var c,d;g.async5._files[a].state=2;g.async5._files[a].loaded.dispatch(a);for(c=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              0;c<g.async5._files[a].provides.length;c++)d=g.async5._files[a].provides[c],d=g.async5._files[d],2>d.state&&(d._triggerLoaded(),d.state=3,d.providedBy=a,d.loaded.removeAll())};this._bindDependencies=function(c){var a,b;if(c instanceof Array)for(a=0;a<c.length;a++)g.async5._files[c[a]]||(g.async5._files[c[a]]=new g.async5._file(c[a],e)),b=g.async5._files[c[a]],2>b.state&&(this.numberOfPendingDependencies++,b.loaded.addOnce(this._onDependencyLoaded))};b&&b instanceof Array?(this._bindDependencies(b),
    this.dependsOn=b):this.dependsOn=[];this.provides=c&&c instanceof Array?c:[]},define:function(a,e,f,b,c){if(a instanceof Array)for(e=0;e<a.length;e++)this.define(a[e]);else"object"===typeof a&&(a.type&&(e=a.type),a.url&&(f=a.url),a.dependsOn&&(b=a.dependsOn),a.provides&&(c=a.provides),a.name&&(a=a.name)),this._files[a]?this._files[a]&&-1===this._files[a].state&&(this._files[a].url=f,this._files[a].state=0,b?(this._files[a]._bindDependencies(b),this._files[a].dependsOn=b):this._files[a].dependsOn=
    [],this._files[a].provides=c?c:[]):this._files[a]=new this._file(a,e,f,b,c)},load:function(a,e,f,b,c,h){if(a instanceof Array)for(e=0;e<a.length;e++)this.load(a[e]);else"object"===typeof a&&(a.callback&&(e=a.callback),a.type&&(f=a.type),a.url&&(b=a.url),a.dependsOn&&(c=a.dependsOn),a.provides&&(h=a.provides),a.name&&(a=a.name)),!this._files[a]&&(a&&f&&b)&&this.define(a,f,b,c,h),this._files[a]&&(this._files[a].isRequested=!0,this._loadAfterDependencies(a,e))},_loadFile:function(a,e,f,b,c){function h(){window.attachEvent?
    window.detachEvent("onload",h):window.removeEventListener("load",h,!1);"js"===e?(d=document.createElement("script"),d.type="text/javascript",d.src=a,d.async=!0):(d=document.createElement("link"),d.setAttribute("rel","stylesheet"),d.type="text/css",d.href=a);var j=document.head||document.getElementsByTagName("head")[0]||document.documentElement;d.onload=d.onreadystatechange=function(c,a){if(a||!d.readyState||/loaded|complete/.test(d.readyState))d=d.onload=d.onreadystatechange=null,a||f&&f()};j.appendChild(d);
    b&&(g=setTimeout(function(){clearTimeout(g);if(d)d.onload(0,!0);c&&c()},b))}var d,g;/loaded|complete/.test(document.readyState)?h():window.attachEvent?window.attachEvent("onload",h):window.addEventListener("load",h,!1)}}})(this);
(function(g){function a(c,a,d,b,e){this._listener=a;this._isOnce=d;this.context=b;this._signal=c;this._priority=e||0}function e(c,a){if("function"!==typeof c)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",a));}function f(){this._bindings=[];this._prevParams=null;var a=this;this.dispatch=function(){f.prototype.dispatch.apply(a,arguments)}}a.prototype={active:!0,params:null,execute:function(a){var b;this.active&&this._listener&&(a=this.params?this.params.concat(a):
    a,b=this._listener.apply(this.context,a),this._isOnce&&this.detach());return b},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal;delete this._listener;delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+
    ", isBound:"+this.isBound()+", active:"+this.active+"]"}};f.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(c,b,d,e){var f=this._indexOfListener(c,d);if(-1!==f){if(c=this._bindings[f],c.isOnce()!==b)throw Error("You cannot add"+(b?"":"Once")+"() then add"+(!b?"":"Once")+"() the same listener without removing the relationship first.");}else c=new a(this,c,b,d,e),this._addBinding(c);this.memorize&&this._prevParams&&c.execute(this._prevParams);return c},
    _addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var d=this._bindings.length,e;d--;)if(e=this._bindings[d],e._listener===a&&e.context===b)return d;return-1},has:function(a,b){return-1!==this._indexOfListener(a,b)},add:function(a,b,d){e(a,"add");return this._registerListener(a,!1,b,d)},addOnce:function(a,b,d){e(a,"addOnce");return this._registerListener(a,!0,
        b,d)},remove:function(a,b){e(a,"remove");var d=this._indexOfListener(a,b);-1!==d&&(this._bindings[d]._destroy(),this._bindings.splice(d,1));return a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(a){if(this.active){var b=Array.prototype.slice.call(arguments),d=this._bindings.length,e;this.memorize&&(this._prevParams=
        b);if(d){e=this._bindings.slice();this._shouldPropagate=!0;do d--;while(e[d]&&this._shouldPropagate&&!1!==e[d].execute(b))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll();delete this._bindings;delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var b=f;b.Signal=f;"function"===typeof define&&define.amd?define(function(){return b}):"undefined"!==typeof module&&module.exports?module.exports=b:g.signals=
    b})(async5);